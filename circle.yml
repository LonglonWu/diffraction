machine:
  python:
    version: 3.6.0
general:
  artifacts:
    - "htmlcov/*"
    - "pytest_report.html"

dependencies:
  pre:
    - pip install -e .
  override:
    - pip install -r requirements.txt
    - pip install -r requirements-dev.txt

test:
    override:
      - py.test --junitxml=$CIRCLE_TEST_REPORTS/report.xml --ignore=venv
      - coverage xml && python-codacy-coverage -r coverage.xml
    post:
      - coveralls